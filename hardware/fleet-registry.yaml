# BlackRoad Fleet Registry — Machine-Readable Device Inventory
# Source of truth for automation and tooling
# Version: 2.1.0
# Updated: 2026-02-21
# Verified: Live SSH + ARP + ping probes

fleet:
  version: "2.1.0"
  updated: "2026-02-21"
  owner: "BlackRoad OS, Inc."
  domain: "blackroad.io"
  tailnet: "blackroad"
  total_devices: 21
  unidentified_devices: 4
  confirmed_ai_tops: 41.8  # 1x Hailo-8 (26) + M1 NE (15.8)
  potential_ai_tops: 134    # If all accelerators installed

  tiers:
    production:
      description: "Always-on Pi cluster"
      count: 8
    cloud:
      description: "DigitalOcean droplets"
      count: 2
    edge:
      description: "Jetson + constellation Pis"
      count: 4
    mesh:
      description: "ESP32 LoRa + MCU array"
      count: 21
    consumer:
      description: "Roku, Xbox, iPhone, MacBooks"
      count: 7
    retired:
      description: "Returned or decommissioned"
      count: 1

  devices:
    # ── Production Cluster ──────────────────────────────────────
    - name: cecilia
      tier: production
      hardware: "Raspberry Pi 5 Model B Rev 1.1"
      ram: "8GB (3.3GB used, 4.6GB available)"
      storage: "457GB NVMe (/dev/nvme0n1p2, 15% used)"
      case: "Standard"
      accelerator: "Hailo-8 M.2 26 TOPS"
      accelerator_serial: "HLLWM2B233704667"
      accelerator_verified: true  # /dev/hailo0 detected
      cooling: "Active fan"
      psu: "Geekworm 27W 5V/5A USB-C"
      ip_local: "192.168.4.89"
      ip_wireguard: "10.8.0.3"
      ip_tailscale: null  # DEPRECATED 2026-02-21 (was 100.72.180.98)
      mac: "88:a2:9e:3b:eb:72"
      os: "Debian 13 (Trixie)"  # NOT Bookworm!
      kernel: "6.12.62+rpt-rpi-2712"
      ssh_user: "cecilia"  # CORRECTED: cecilia has NOPASSWD sudo, not blackroad
      roles:
        - primary_ai_host
        - orchestration
        - inference
      services:
        - ollama
        - cece-os
        - hailo-runtime
      ssh: "ssh cecilia"
      tunnel: "tunnel-cecilia.blackroad.io"
      status: active

    - name: octavia
      tier: production
      hardware: "Raspberry Pi 5 Model B Rev 1.1"
      ram: "8GB (6.6GB used, 1.3GB available)"  # WARNING: memory pressure
      storage: "235GB microSD (34% used, 76G/235G)"
      case: "Pironman"
      accelerator: null  # HAILO NOT DETECTED despite registry
      accelerator_verified: false
      cooling: "Pironman dual-fan tower"
      psu: "Geekworm 27W 5V/5A USB-C"
      ip_local: "192.168.4.38"
      ip_wireguard: "10.8.0.5"  # PENDING: config not deployed (no SSH key for sudo user)
      ip_tailscale: null  # DEPRECATED 2026-02-21 (was 100.66.235.47)
      mac: "2c:cf:67:cf:fa:17"
      os: "Debian 12 (Bookworm)"
      kernel: "6.12.62+rpt-rpi-2712"
      ssh_user: "blackroad"
      load_average: "9.47"  # WARNING: overloaded
      roles:
        - ai_inference
        - auth
        - dns
      services:
        - hailo-runtime
        - powerdns
        - powerdns-admin
        - roadauth
        - roadapi
        - auth-gateway
      ssh: "ssh octavia"
      tunnel: "tunnel-octavia.blackroad.io"
      status: active

    - name: lucidia
      tier: production
      hardware: "Raspberry Pi 5"
      ram: "8GB"
      storage: "117GB microSD (Samsung EVO Select)"
      case: "ElectroCookie Radial Tower"
      accelerator: null
      cooling: "ElectroCookie tower cooler"
      psu: "Geekworm 27W 5V/5A USB-C"
      ip_local: "192.168.4.81"
      ip_wireguard: "10.8.0.4"
      ip_tailscale: null  # DEPRECATED 2026-02-21 (was 100.83.149.86)
      mac: null  # Previously ARP incomplete, now alive
      os: "Debian 13 (Trixie)"  # CORRECTED: verified via SSH 2026-02-21
      kernel: "6.12.62+rpt-rpi-2712"
      ssh_user: "lucidia"  # CORRECTED: lucidia has NOPASSWD sudo
      hostname_bug: "hostname='octavia', mDNS='octavia-2' — identity swapped with Octavia"
      case: "Pironman 5 (SunFounder)"  # CORRECTED: has Pironman, not ElectroCookie
      overclocked: "2.6GHz (over_voltage=6)"
      status_override: null  # Node is UP as of 2026-02-21
      roles:
        - nats_bus
        - llm_inference
        - edge
      services:
        - nats
        - ollama
        - edge-agent
      ssh: "ssh lucidia"
      tunnel: "tunnel-lucidia.blackroad.io"
      status: active

    - name: aria
      tier: production
      hardware: "Raspberry Pi 5 Model B Rev 1.1"
      ram: "8GB (3.8GB used, 4.0GB available)"
      storage: "29GB microSD (74% used, 7.3GB free)"  # WARNING: low space
      case: "Pironman"
      accelerator: null  # HAILO NOT DETECTED despite registry
      accelerator_verified: false
      cooling: "Pironman dual-fan tower"
      psu: "Geekworm 27W 5V/5A USB-C"
      ip_local: "192.168.4.82"
      ip_wireguard: "10.8.0.7"
      ip_tailscale: null  # DEPRECATED 2026-02-21 (was 100.109.14.17)
      mac: "88:a2:9e:0d:42:07"
      os: "Debian 12 (Bookworm)"
      kernel: "6.12.62+rpt-rpi-2712"
      ssh_user: "blackroad"
      roles:
        - api_services
        - compute
      services:
        - compute
      ssh: "ssh aria"
      status: active

    - name: anastasia
      tier: production
      hardware: "Raspberry Pi 5"
      ram: "8GB"
      storage: "Unknown (SSH closed)"
      case: "Pironman"
      accelerator: null
      cooling: "Pironman dual-fan tower"
      psu: "Geekworm 27W 5V/5A USB-C"
      ip_local: "192.168.4.33"
      ip_tailscale: null
      mac: "60:92:c8:11:cf:7c"  # Confirmed Raspberry Pi 5
      os: "Unknown (SSH closed)"
      ssh_user: "blackroad"
      ssh_note: "WARNING: SSH alias 'anastasia' points to DO droplet, NOT this Pi"
      roles:
        - ai_inference_secondary
      services: []
      ssh: "ssh blackroad@192.168.4.33"  # Direct IP needed, alias is wrong
      status: ssh_closed  # Ping responds but port 22 refused

    - name: cordelia
      tier: production
      hardware: "Raspberry Pi 5"
      ram: "8GB"
      storage: "microSD"
      case: "Standard"
      accelerator: null
      cooling: "Active cooler"
      psu: "Geekworm 27W 5V/5A USB-C"
      ip_local: "192.168.4.27"
      ip_tailscale: null
      os: "Debian 12 (Bookworm)"
      kernel: "6.1 LTS"
      roles:
        - orchestration
      services: []
      ssh: "ssh cordelia"
      status: active

    - name: alice
      tier: production
      hardware: "Raspberry Pi 400 Rev 1.0"
      ram: "4GB (579MB used, 3.1GB available)"
      storage: "15GB root (71% used, 4.1GB free)"  # NOT 32GB
      case: "Built-in keyboard"
      accelerator: null
      cooling: "Passive (built-in)"
      psu: "5V/3A USB-C (15W)"
      ip_local: "192.168.4.49"
      ip_wireguard: "10.8.0.6"
      ip_tailscale: null  # DEPRECATED 2026-02-21 (was 100.77.210.18)
      mac: "d8:3a:dd:ff:98:87"
      os: "Raspbian 11 (Bullseye)"  # NOT Bookworm — needs upgrade
      kernel: "6.1.21-v8+"
      ssh_user: "blackroad"
      load_average: "6.17"  # High for 4 cores
      roles:
        - gateway
        - development
      services:
        - worker
      ssh: "ssh alice"
      status: active

    - name: olympia
      tier: production
      hardware: "Raspberry Pi 4B"
      ram: "4GB"
      storage: "microSD"
      case: "PiKVM case"
      accelerator: null
      cooling: "Passive"
      psu: "5V/3A USB-C (15W)"
      ip_local: null
      ip_tailscale: null
      os: "PiKVM OS"
      roles:
        - kvm_console
      services: []
      ssh: null
      status: offline

    # ── Cloud Compute ───────────────────────────────────────────
    - name: codex-infinity
      tier: cloud
      actual_hostname: "gematria"
      hardware: "DigitalOcean Droplet (DO-Premium-AMD)"
      ram: "~765MB"
      storage: "25GB+"
      ip_local: "159.65.43.12"
      ip_wireguard: "10.8.0.8"
      ip_tailscale: null  # DEPRECATED 2026-02-21 (was 100.108.132.8)
      os: "Debian/Ubuntu based"
      ssh_user: "blackroad"
      ssh_alias: "gematria"
      roles:
        - codex_server
        - oracle
      services:
        - ollama (port 11434, public)
        - nginx (80, 443)
        - cloudflared
        - caddy (2019 admin)
        - python-app (8787, 8011)
      tunnel: "tunnel-codex.blackroad.io"
      status: active
      uptime: "55+ days"

    - name: shellfish
      tier: cloud
      actual_hostname: "anastasia"  # WARNING: name collision with Pi
      hardware: "DigitalOcean Droplet (DO-Premium-AMD)"
      ram: "765MB (408MB used)"
      storage: "25GB SSD (57% used, 15G/25G)"
      ip_local: "174.138.44.45"
      ip_wireguard: "10.8.0.1"  # WireGuard HUB
      ip_tailscale: null  # DEPRECATED 2026-02-21 (was 100.94.33.37)
      os: "CentOS Stream 9"
      kernel: "5.14.0-651.el9.x86_64"
      ssh_user: "blackroad"
      ssh_alias: "anastasia"  # WARNING: collides with Pi
      ssh_alias_alt: "cadence"
      roles:
        - cloud_infrastructure
        - edge
      services:
        - ollama (port 11434, Tailscale only at 100.64.0.1)
        - nginx (80)
        - cloudflared
        - docker
        - uvicorn-api (8000)
        - websocket (8765, 8766)
        - redis-like (6379)
        - grafana (3000, 3001)
        - python-apps (8080, 8787, 8888)
      tunnel: "tunnel-cadence.blackroad.io"
      status: active
      uptime: "55+ days"

    # ── Edge Compute ────────────────────────────────────────────
    - name: jetson-agent
      tier: edge
      hardware: "NVIDIA Jetson Orin Nano"
      ram: "8GB"
      storage: "microSD + NVMe"
      accelerator: "NVIDIA Ampere GPU 40 TOPS"
      cooling: "Dev kit heatsink + fan"
      psu: "Barrel jack (15W)"
      ip_local: null
      display: "10.1\" ROADOM Touch IPS 1024x600"
      roles:
        - agent_ui
        - gpu_inference
      services: []
      status: pending

    - name: persephone
      tier: edge
      hardware: "Sipeed RISC-V"
      roles:
        - portable_compute
      status: active

    # ── Planned Edge Nodes ──────────────────────────────────────
    - name: pi-holo
      tier: edge
      hardware: "Raspberry Pi 5"
      ram: "8GB"
      display: "4\" Waveshare 720x720 Square"
      roles:
        - hologram_renderer
      status: planned

    - name: pi-ops
      tier: edge
      hardware: "Raspberry Pi 5"
      ram: "8GB"
      display: "9.3\" Waveshare 1600x600 Ultrawide"
      roles:
        - mqtt_broker
        - ops_monitor
      status: planned

    - name: pi-zero-sim
      tier: edge
      hardware: "Raspberry Pi Zero W"
      display: "7\" Waveshare 1024x600 Touch"
      roles:
        - sim_output
      status: ready

    # ── Consumer Devices ────────────────────────────────────────
    - name: alexandria
      tier: consumer
      hardware: "MacBook Pro M1"
      ram: "8GB"
      accelerator: "Apple M1 Neural Engine 15.8 TOPS"
      ip_local: "192.168.4.28"
      roles:
        - operator_workstation
      status: active

    - name: iris
      tier: consumer
      hardware: "Roku"
      ip_local: "192.168.4.26"
      roles:
        - streaming
      status: active

    - name: ares
      tier: consumer
      hardware: "Xbox"
      ip_local: "192.168.4.90"
      roles:
        - gaming
      status: active

    - name: phoebe
      tier: consumer
      hardware: "iPhone"
      ip_local: "192.168.4.88"
      roles:
        - mobile
      status: active

    # ── Retired ─────────────────────────────────────────────────
    - name: sensecap-watcher-w1a
      tier: retired
      hardware: "SenseCAP Watcher W1-A"
      processor: "ESP32-S3"
      ai_chip: "Himax WiseEye2 HX6538 (Arm Cortex-M55 + Arm Ethos-U55 NPU)"
      ai_tops: 1
      peripherals:
        - "Camera (image recognition)"
        - "Microphone (voice control)"
        - "Speaker (audio output)"
        - "Capacitive touch interface"
      connectivity: "WiFi"
      features:
        - "On-device AI inference (person/animal/gesture detection)"
        - "SenseCraft AI integration"
        - "Voice-activated commands"
        - "No-code workflow configuration"
        - "OTA updates"
      status: returned
      notes: >
        Purchased and returned August 2025. ESP32-S3 base with dedicated
        Himax AI coprocessor. Standalone edge AI unit with camera + mic +
        speaker. Could be re-acquired for doorbell/monitor use case.
        Ethos-U55 NPU adds ~1 TOPS for vision inference.

  # ── Unidentified LAN Devices ────────────────────────────────
  unidentified:
    - ip: "192.168.4.22"
      mac: "30:be:29:5b:24:5f"
      oui: "Unknown (possibly Hisense)"
      ping: true
      guess: "Smart TV or IoT device"

    - ip: "192.168.4.44"
      mac: "98:17:3c:38:db:78"
      oui: "TP-Link"
      ping: true
      guess: "WiFi extender or smart plug"

    - ip: "192.168.4.83"
      mac: "54:4c:8a:9b:09:3d"
      oui: "Unknown (Shenzhen Bilian)"
      ping: true
      guess: "Smart home WiFi module"

    - ip: "192.168.4.92"
      mac: "de:a2:b7:f3:f9:5d"
      oui: "Locally administered (Apple device)"
      ping: false
      guess: "Apple device with private WiFi address"

  # ── MCU Array ───────────────────────────────────────────────
  microcontrollers:
    - type: "ESP32-S3 SuperMini"
      quantity: 5
      connectivity: "WiFi + BLE"
      form_factor: "Tiny USB-C"
      purpose: "General IoT"

    - type: "ESP32-S3 N8R8"
      quantity: 2
      connectivity: "WiFi + BLE + OTG USB"
      specs: "8MB PSRAM, 8MB Flash"
      purpose: "High-memory apps"

    - type: "ESP32 2.8\" Touchscreen"
      quantity: 3
      display: "ILI9341 320x240"
      connectivity: "WiFi + BLE"
      purpose: "Standalone sensor display"

    - type: "Heltec WiFi LoRa 32 (Athena)"
      quantity: 1
      connectivity: "WiFi + LoRa 868/915MHz"
      display: "0.96\" OLED"
      ip_local: "192.168.4.45"
      purpose: "LoRa mesh node"

    - type: "M5Stack Atom Lite"
      quantity: 2
      chip: "ESP32-PICO"
      connectivity: "WiFi + BLE"
      form_factor: "24x24mm cube"
      purpose: "Button/LED/Grove peripherals"

    - type: "Raspberry Pi Pico"
      quantity: 2
      chip: "RP2040"
      connectivity: "USB only"
      purpose: "MicroPython prototyping"

    - type: "ATTINY88"
      quantity: 3
      chip: "AVR 8-bit"
      connectivity: "I2C/SPI (slave only)"
      purpose: "Low-power peripherals"

    - type: "ELEGOO UNO R3"
      quantity: 2
      chip: "ATmega328P"
      purpose: "Starter kit projects"

    - type: "WCH CH32V003"
      quantity: 1
      chip: "RISC-V"
      purpose: "Ultra-cheap RISC-V experiments"

  # ── Network ─────────────────────────────────────────────────
  network:
    lan:
      subnet: "192.168.4.0/24"
      gateway: "192.168.4.1"
      router: "TP-Link"
      switch: "TP-Link TL-SG105 (5-port gigabit)"
      wifi: "TP-Link AX3000 PCIe WiFi 6"

    wireguard:
      subnet: "10.8.0.0/24"
      hub: "shellfish (174.138.44.45:51820)"
      hub_ip: "10.8.0.1"
      topology: "hub-and-spoke"
      deployed: "2026-02-21"
      nodes: 8
      active: 5  # cecilia, lucidia, alice, aria, infinity
      pending: 2  # alexandria (needs sudo), octavia (needs SSH key)
      config_path: "/etc/wireguard/wg0.conf"
      autostart: "systemctl enable wg-quick@wg0"

    tailscale:
      status: "DEPRECATED — disabled fleet-wide 2026-02-21"
      reason: "tailscaled 190% CPU bug on Pi 4 (recurring)"
      replacement: "WireGuard (in-kernel, near-zero CPU)"
      tailnet: "blackroad"
      nodes: 0  # all disabled

    tunnels:
      provider: "Cloudflare"
      format: "tunnel-{hostname}.blackroad.io"
      config_path: "/etc/cloudflared/config.yml"

    dns:
      provider: "Cloudflare"
      zone: "blackroad.io"
      internal_dns: "PowerDNS on Octavia"

  # ── OS Baseline ─────────────────────────────────────────────
  os_baseline:
    distribution: "Debian 12 (Bookworm)"
    kernel_pi: "6.1 LTS"
    kernel_cloud: "5.15 LTS"
    init: "systemd"
    shell: "bash"
    package_manager: "apt"
    operator_user: "alexandria"
    operator_uid: 1000
    ssh:
      permit_root: false
      password_auth: false
      pubkey_auth: true
    firewall:
      tool: "ufw"
      default: "deny"
      allowed_ports: [22, 80, 443, 51820]  # 51820=WireGuard (replaced Tailscale 41641)
    security:
      unattended_upgrades: true
      fail2ban: true
    time_sync:
      tool: "chrony"
      server: "time.cloudflare.com"
